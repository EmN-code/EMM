// FSM
digraph {
	INITIAL [label=INITIAL]
	INITIAL -> THREAD1_RUNNING [label=THREAD1_START]
	INITIAL -> THREAD2_RUNNING [label=THREAD2_START]
	THREAD1_RUNNING [label=THREAD1_RUNNING]
	THREAD1_RUNNING -> WAIT_FOR_THREAD2_RESPONSE [label=MSG_REQUEST_SENT]
	WAIT_FOR_THREAD2_RESPONSE [label=WAIT_FOR_THREAD2_RESPONSE]
	WAIT_FOR_THREAD2_RESPONSE -> THREAD1_SUCCESS [label=VALID_RESPONSE_RECEIVED]
	WAIT_FOR_THREAD2_RESPONSE -> THREAD1_FAILURE [label=INVALID_RESPONSE_RECEIVED]
	THREAD2_RUNNING [label=THREAD2_RUNNING]
	THREAD2_RUNNING -> PROCESS_MESSAGE [label=MSG_RECEIVED]
	PROCESS_MESSAGE [label=PROCESS_MESSAGE]
	PROCESS_MESSAGE -> SEND_REPLY_TO_THREAD1 [label=MSG_PROCESSED]
	SEND_REPLY_TO_THREAD1 [label=SEND_REPLY_TO_THREAD1]
	SEND_REPLY_TO_THREAD1 -> THREAD2_WAIT_FOR_NEXT_MSG [label=REPLY_SENT]
	THREAD2_WAIT_FOR_NEXT_MSG [label=THREAD2_WAIT_FOR_NEXT_MSG]
	THREAD2_WAIT_FOR_NEXT_MSG -> PROCESS_MESSAGE [label=NEXT_MSG]
	THREAD1_SUCCESS [label=THREAD1_SUCCESS]
	THREAD1_SUCCESS -> EXIT [label=ITERATION_COMPLETE]
	THREAD1_FAILURE [label=THREAD1_FAILURE]
	THREAD1_FAILURE -> EXIT [label=FAILURE_HANDLING]
	EXIT [label=EXIT]
}
