#include <string.h>\n#include <stdlib.h>\n#include <stdint.h>\n#include "net/sock/udp.h"\n#include "xtimer.h"\n#include "MQTTClient.h"  // Ensure this is included last\n\n#define MQTT_BROKER_IP "47.102.103.1"\n#define MQTT_BROKER_PORT 1883\n#define MQTT_CLIENT_ID "ESP32Client"\n#define MQTT_TOPIC "state"\n#define PUB_TIME_INTERVAL (5U * 1000000U) // 5 seconds in microseconds\n\nstatic char sendbuf[128];\nstatic char readbuf[128];\n\nint main(void) {\n    Network network;\n    MQTTClient client;\n\n    // Initialize network and MQTT client\n    NetworkInit(&network);\n    MQTTClientInit(&client, &network, 1000, sendbuf, sizeof(sendbuf), readbuf, sizeof(readbuf));\n\n    // Connect to the MQTT broker\n    MQTTPacket_connectData options = MQTTPacket_connectData_initializer;\n    options.MQTTVersion = 3;\n    options.clientID.cstring = MQTT_CLIENT_ID;\n\n    if (NetworkConnect(&network, MQTT_BROKER_IP, MQTT_BROKER_PORT) != 0) {\n        printf("Failed to connect to network\n");\n        return -1;\n    }\n    if (MQTTConnect(&client, &options) != 0) {\n        printf("Failed to connect to MQTT broker\n");\n        return -1;\n    }\n\n    printf("Connected to MQTT broker at %s:%d\n", MQTT_BROKER_IP, MQTT_BROKER_PORT);\n\n    // Prepare the message\n    MQTTMessage message;\n    message.qos = QOS0;\n    message.retained = 0;\n    message.payload = "work";\n    message.payloadlen = strlen("work");\n\n    while (1) {\n        if (MQTTPublish(&client, MQTT_TOPIC, &message) != 0) {\n            printf("Failed to publish message\n");\n        } else {\n            printf("Message published: %s\n", (char*)message.payload);\n        }\n        xtimer_usleep(PUB_TIME_INTERVAL);\n    }\n    return 0;\n}