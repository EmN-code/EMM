
#include <stdio.h>
#include <string.h>
#include <xtimer.h>
#include <net/sock/tcp.h>
#include <net/mqtt.h>

#define MQTT_BROKER_IP "47.102.103.1"
#define MQTT_BROKER_PORT 1883
#define MQTT_TOPIC "state"
#define MQTT_MESSAGE "work"
#define MQTT_MESSAGE_LEN 4
#define MQTT_KEEPALIVE 60
#define MQTT_QOS 0
#define MQTT_RETAIN 0
#define MQTT_WILL_FLAG 0
#define MQTT_WILL_QOS 0
#define MQTT_WILL_RETAIN 0
#define MQTT_WILL_TOPIC NULL
#define MQTT_WILL_MESSAGE NULL
#define MQTT_USERNAME NULL
#define MQTT_PASSWORD NULL
#define MQTT_CLIENT_ID "riot_client"
#define MQTT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_FLAGS (MQTT_WILL_FLAG << 2) | (MQTT_WILL_QOS << 3) | (MQTT_WILL_RETAIN << 5) | (MQTT_USERNAME ? 0x80 : 0) | (MQTT_PASSWORD ? 0x40 : 0)
#define MQTT_CONNECT_KEEPALIVE 60
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LEN 1
#define MQTT_CONNECT_KEEPALIVE_LEN 2
#define MQTT_CONNECT_CLIENT_ID_LEN 11
#define MQTT_CONNECT_WILL_TOPIC_LEN 0
#define MQTT_CONNECT_WILL_MESSAGE_LEN 0
#define MQTT_CONNECT_USERNAME_LEN 0
#define MQTT_CONNECT_PASSWORD_LEN 0
#define MQTT_CONNECT_LEN 2 + MQTT_CONNECT_CLIENT_ID_LEN + MQTT_CONNECT_WILL_TOPIC_LEN + MQTT_CONNECT_WILL_MESSAGE_LEN + MQTT_CONNECT_USERNAME_LEN + MQTT_CONNECT_PASSWORD_LEN
#define MQTT_CONNECT_HEADER 0x10
#define MQTT_CONNECT_HEADER_LEN 2
#define MQTT_CONNECT_PROTOCOL_NAME "MQTT"
#define MQTT_CONNECT_PROTOCOL_NAME_LEN 4
#define MQTT_CONNECT_PROTOCOL_LEVEL 4
#define MQTT_CONNECT_PROTOCOL_LEVEL_LEN 1
#define MQTT_CONNECT_FLAGS_LE